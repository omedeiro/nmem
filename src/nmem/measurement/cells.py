CELLS = {
    "A1": {
        "write_current": 150e-6,
        "read_current": 590e-6,
        "enable_write_current": 440e-6,
        "enable_read_current": 155e-6,
        "slope": -1.758,
        "y_intercept": 967.308,
        "x_intercept": 550.16,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 870e-6,
        "min_bit_error_rate": 1.00e-5,
    },
    "A2": {
        "write_current": 97e-6,
        "read_current": 603e-6,
        "enable_write_current": 342e-6,
        "enable_read_current": 200e-6,
        "slope": -1.958,
        "y_intercept": 1018.124,
        "x_intercept": 519.97,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 870e-6,
        "min_bit_error_rate": 9.0e-4,
    },
    "A3": {
        "write_current": 173e-6,
        "read_current": 706e-6,
        "enable_write_current": 433e-6,
        "enable_read_current": 192e-6,
        "slope": -2.683,
        "y_intercept": 1427.500,
        "x_intercept": 531.99,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 870e-6,
        "min_bit_error_rate": 1.70e-04,
    },
    "A4": {
        "write_current": 60e-6,
        "read_current": 712e-6,
        "enable_write_current": 500e-6,
        "enable_read_current": 220e-6,
        "slope": -2.317,
        "y_intercept": 1300.278,
        "x_intercept": 561.27,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 870e-6,
        "min_bit_error_rate": 7.20e-04,
    },
    "B1": {
        "write_current": 182e-6,
        "read_current": 586e-6,
        "enable_write_current": 492e-6,
        "enable_read_current": 261e-6,
        "slope": -2.067,
        "y_intercept": 1196.111,
        "x_intercept": 578.76,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 810e-6,
        "min_bit_error_rate": 3.5e-4,
    },
    "B2": {
        "write_current": 150e-6,
        "read_current": 775e-6,
        "enable_write_current": 500e-6,
        "enable_read_current": 105e-6,
        "slope": -2.274,
        "y_intercept": 1266.071,
        "x_intercept": 556.81,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 810e-6,
        "min_bit_error_rate": 9.00e-05,
    },
    "B3": {
        "write_current": 103e-6,
        "read_current": 747e-6,
        "enable_write_current": 431e-6,
        "enable_read_current": 219e-6,
        "slope": -2.750,
        "y_intercept": 1498.750,
        "x_intercept": 545.00,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 810e-6,
        "min_bit_error_rate": 4.00e-05,
    },
    "B4": {
        "write_current": 141e-6,
        "read_current": 717e-6,
        "enable_write_current": 426e-6,
        "enable_read_current": 164e-6,
        "slope": -2.775,
        "y_intercept": 1364.236,
        "x_intercept": 491.62,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 810e-6,
        "min_bit_error_rate": 2.00e-04,
    },
    "C1": {
        "write_current": 40e-6,
        "read_current": 750e-6,
        "enable_write_current": 450e-6,
        "enable_read_current": 220e-6,
        "slope": -2.908,
        "y_intercept": 1566.111,
        "x_intercept": 538.49,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 910e-6,
        "min_bit_error_rate": 6.25e-4,
    },
    "C2": {
        "write_current": 143e-6,
        "read_current": 826e-6,
        "enable_write_current": 478e-6,
        "enable_read_current": 108e-6,
        "slope": -2.530,
        "y_intercept": 1304.242,
        "x_intercept": 515.45,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 910e-6,
        "min_bit_error_rate": 0.057,
    },
    "C3": {
        "write_current": 36e-6,
        "read_current": 736e-6,
        "enable_write_current": 567e-6,
        "enable_read_current": 144e-6,
        "slope": -3.083,
        "y_intercept": 1637.500,
        "x_intercept": 531.08,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 910e-6,
        "min_bit_error_rate": 1.00e-05,
    },
    "C4": {
        "write_current": 200e-6,
        "read_current": 755e-6,
        "enable_write_current": 490e-6,
        "enable_read_current": 200e-6,
        "slope": -2.983,
        "y_intercept": 1586,
        "x_intercept": 531.75,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 910e-6,
        "min_bit_error_rate": 1.70e-04,
    },
    "D1": {
        "write_current": 287e-6,
        "read_current": 821e-6,
        "enable_write_current": 438e-6,
        "enable_read_current": 138e-6,
        "slope": -2.530,
        "y_intercept": 1407.589,
        "x_intercept": 556.41,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 820e-6,
        "min_bit_error_rate": 9.30e-04,
    },
    "D2": {
        "write_current": 251e-6,
        "read_current": 790e-6,
        "enable_write_current": 402e-6,
        "enable_read_current": 183e-6,
        "slope": -2.637,
        "y_intercept": 1401.786,
        "x_intercept": 531.60,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 820e-6,
        "min_bit_error_rate": 1.20e-04,
    },
    "D3": {
        "write_current": 131e-6,
        "read_current": 643e-6,
        "enable_write_current": 514e-6,
        "enable_read_current": 262e-6,
        "slope": -2.786,
        "y_intercept": 1505.357,
        "x_intercept": 540.38,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 820e-6,
        "min_bit_error_rate": 9.40e-04,
    },
    "D4": {
        "write_current": 180e-6,
        "read_current": 600e-6,
        "enable_write_current": 463e-6,
        "enable_read_current": 200e-6,
        "slope": -1.874,
        "y_intercept": 1084.353,
        "x_intercept": 578.59,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 820e-6,
        "min_bit_error_rate": 1.60e-04,
    },
}

HEATERS = {
    1: {
        "resistance_cryo": 258.8,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.251e-3,
        "squares": 428,
    },
    2: {
        "resistance_cryo": 281.8,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.727e-3,
        "squares": 387,
    },
    3: {
        "resistance_cryo": 253.3,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.126e-3,
        "squares": 387,
    },
    4: {
        "resistance_cryo": 287.5,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.835e-3,
        "squares": 428,
    },
}


FREQ_IDX = 1
NUM_POINTS = 128
HORIZONTAL_SCALE = {
    0: 5e-7,
    1: 1e-6,
    2: 2e-6,
    3: 5e-6,
    4: 1e-5,
    5: 2e-5,
    6: 5e-5,
    7: 1e-4,
    8: 2e-4,
    9: 5e-4,
}
SAMPLE_RATE = {
    0: 512e6,
    1: 128e6,
    2: 128e6,
    3: 512e5,
    4: 256e5,
    5: 128e5,
    6: 512e4,
    7: 256e4,
    8: 128e4,
    9: 512e3,
}
CONFIG = r"SPG806_config_ICE.yml"
NUM_DIVISIONS = 10
NUM_SAMPLES = int(5e3)
SPICE_DEVICE_CURRENT = 45.189e-6
MITEQ_AMP_GAIN = 53.87

LEFT_BRANCH_SQUARES = 8.7
RIGHT_BRANCH_SQUARES = 13.7

DEFAULT_WAVEFORM = {
    "num_points": NUM_POINTS,
    "sample_rate": SAMPLE_RATE[FREQ_IDX],
    "write_width": 90,
    "read_width": 90,  #
    "enable_write_width": 30,
    "enable_read_width": 30,
    "enable_write_phase": 0,
    "enable_read_phase": 30,
    "bitmsg_channel": "N0RNR1RNRN",
    "bitmsg_enable": "NWNWEWNWEW",
}


# Fast waveform settings -- 11072024
# slow_write = {
#     "write_width": 40,
#     "enable_write_width": 40,
#     "enable_write_phase": 0,
# }
# fast_write = {
#     "write_width": 0,
#     "enable_write_width": 3,
#     "enable_write_phase": -5,
# }

# slow_read = {
#     "read_width": 40,
#     "enable_read_width": 120,
#     "enable_read_phase": 25,
# }

# fast_read = {
#     "read_width": 7,
#     "enable_read_width": 7,
#     "enable_read_phase": -8,
# }


DEFAULT_SCOPE = {
    "scope_horizontal_scale": HORIZONTAL_SCALE[FREQ_IDX],
    "scope_timespan": HORIZONTAL_SCALE[FREQ_IDX] * NUM_DIVISIONS,
    "scope_num_samples": NUM_SAMPLES,
    "scope_sample_rate": NUM_SAMPLES / (HORIZONTAL_SCALE[FREQ_IDX] * NUM_DIVISIONS),
}

DELAY_DICT = {
    0: {
        "delay": 1e-6,
        "bit_error_rate": 3.5e-4,
    },
    1: {
        "delay": 2e-6,
        "bit_error_rate": 2.5e-4,
    },
    2: {
        "delay": 3e-6,
        "bit_error_rate": 3.0e-4,
    },
    3: {
        "delay": 4e-6,
        "bit_error_rate_0": 4.91e-1,
        "bit_error_rate_1": 5.34e-1,
    },
    4: {
        "delay": 5e-6,
        "bit_error_rate_0": 5.13e-1,
        "bit_error_rate_1": 5.39e-1,
    },
    5: {
        "delay": 6e-6,
        "bit_error_rate_0": 5.10e-1,
        "bit_error_rate_1": 5.41e-1,
    },
}
