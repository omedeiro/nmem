CELLS = {
    "A1": {
        "write_current": 20.002e-6,
        "read_current": 487.976e-6,
        "enable_write_current": 249.494e-6,
        "enable_read_current": 182.499e-6,
        "slope": -2.807,
        "intercept": 1062.75,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 760e-6,
        "min_bit_error_rate": 0.0058,
    },
    "A2": {
        "write_current": 202.376e-6,
        "read_current": 672.578e-6,
        "enable_write_current": 214.965e-6,
        "enable_read_current": 129.282e-6,
        "slope": -3.295,
        "intercept": 1152.723,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 760e-6,
        "min_bit_error_rate": 0.003175,
    },
    "A3": {
        "write_current": 117e-6,
        "read_current": 560e-6,
        "enable_write_current": 200e-6,
        "enable_read_current": 216e-6,
        "slope": -3.520,
        "intercept": 1390.561,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 800e-6,
        "min_bit_error_rate": 0.013,
    },
    "A4": {
        "write_current": 60e-6,
        "read_current": 712e-6,
        "enable_write_current": 500e-6,
        "enable_read_current": 220e-6,
        "slope": -2.0,
        "intercept": 1200,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 855e-6,
        "min_bit_error_rate": 7.20e-04,
    },
    "B1": {
        "write_current": 129.51e-6,
        "read_current": 602.473e-6,
        "enable_write_current": 290.49e-6,
        "enable_read_current": 200.973e-6,
        "slope": -2.272,
        "intercept": 1190,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 702e-6,
        "min_bit_error_rate": 0.035,
    },
    "B2": {
        "write_current": 45.213e-6,
        "read_current": 675.9e-6,
        "enable_write_current": 224.494e-6,
        "enable_read_current": 179.9e-6,
        "slope": -4.235,
        "intercept": 1492,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 908e-6,
        "min_bit_error_rate": 0.0034,
    },
    "B3": {
        "write_current": 40e-6,
        "read_current": 745.355e-6,
        "enable_write_current": 260e-6,
        "enable_read_current": 160.383e-6,
        "slope": -4.086,
        "intercept": 1515.00,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "max_critical_current": 908e-6,
        "min_bit_error_rate": 0.0045,
    },
    "B4": {
        "write_current": 141e-6,
        "read_current": 717e-6,
        "enable_write_current": 426e-6,
        "enable_read_current": 164e-6,
        "slope": -2.65,
        "intercept": 1310,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 908e-6,
        "min_bit_error_rate": 2.00e-04,
    },
    "C1": {
        "write_current": 40e-6,
        "read_current": 750e-6,
        "enable_write_current": 450e-6,
        "enable_read_current": 220e-6,
        "slope": -2.72,
        "intercept": 1480,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 900e-6,
        "min_bit_error_rate": 6.25e-4,
    },
    "C2": {
        "write_current": 69.605e-6,
        "read_current": 644.782e-6,
        "enable_write_current": 245.711e-6,
        "enable_read_current": 158.803e-6,
        "slope": -4.286,
        "intercept": 1501.429,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 812e-6,
        "min_bit_error_rate": 0.029,
    },
    "C3": {
        "write_current": 65e-6,
        "read_current": 425e-6,
        "enable_write_current": 332e-6,
        "enable_read_current": 267e-6,
        "slope": -5.258,
        "intercept": 1875.298,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "min_bit_error_rate": 0.021,
        "max_critical_current": 830e-6,
    },
    "C4": {
        "write_current": 200e-6,
        "read_current": 755e-6,
        "enable_write_current": 490e-6,
        "enable_read_current": 200e-6,
        "slope": -4.531,
        "intercept": 1632.812,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 830e-6,
        "min_bit_error_rate": 1.70e-04,
    },
    "D1": {
        "write_current": 41.067e-6,
        "read_current": 554.363e-6,
        "enable_write_current": 270.313e-6,
        "enable_read_current": 228.495e-6,
        "slope": -3.257,
        "intercept": 1404.643,
        "resistance": 559.2,
        "resistance_cryo": 258.8,
        "max_critical_current": 740e-6,
        "min_bit_error_rate": 0.0145,
    },
    "D2": {
        "write_current": 176.86e-6,
        "read_current": 484.9e-6,
        "enable_write_current": 238.61e-6,
        "enable_read_current": 236.9e-6,
        "slope": -4.455,
        "intercept": 1629.205,
        "resistance": 509.6,
        "resistance_cryo": 281.8,
        "max_critical_current": 810e-6,
        "min_bit_error_rate": 0.064,
    },
    "D3": {
        "write_current": 87e-6,
        "read_current": 662.145e-6,
        "enable_write_current": 284e-6,
        "enable_read_current": 195.824e-6,
        "slope": -4.70,
        "intercept": 1714.0,
        "resistance": 518.1,
        "resistance_cryo": 253.3,
        "min_bit_error_rate": 0.065,
        "max_critical_current": 771e-6,
    },
    "D4": {
        "write_current": 0e-6,
        "read_current": 0e-6,
        "enable_write_current": 0e-6,
        "enable_read_current": 0e-6,
        "slope": -1.68,
        "intercept": 990,
        "resistance": 570.6,
        "resistance_cryo": 287.5,
        "max_critical_current": 807e-6,
    },
}

HEATERS = {
    1: {
        "resistance_cryo": 258.8,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.251e-3,
        "squares": 428,
    },
    2: {
        "resistance_cryo": 281.8,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.727e-3,
        "squares": 387,
    },
    3: {
        "resistance_cryo": 253.3,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.126e-3,
        "squares": 387,
    },
    4: {
        "resistance_cryo": 287.5,
        "spice_input_voltage": 0.1,
        "spice_heater_voltage": 78.835e-3,
        "squares": 428,
    },
}


FREQ_IDX = 1
NUM_POINTS = 128
HORIZONTAL_SCALE = {
    0: 5e-7,
    1: 1e-6,
    2: 2e-6,
    3: 5e-6,
    4: 1e-5,
    5: 2e-5,
    6: 5e-5,
    7: 1e-4,
    8: 2e-4,
    9: 5e-4,
}
SAMPLE_RATE = {
    0: 512e6,
    1: 128e6,
    2: 128e6,
    3: 512e5,
    4: 256e5,
    5: 128e5,
    6: 512e4,
    7: 256e4,
    8: 128e4,
    9: 512e3,
}
CONFIG = r"SPG806_config_ICE.yml"
NUM_DIVISIONS = 10
NUM_SAMPLES = int(5e3)
SPICE_DEVICE_CURRENT = 45.189e-6
MITEQ_AMP_GAIN = 53.87

LEFT_BRANCH_SQUARES = 8.7
RIGHT_BRANCH_SQUARES = 13.7

DEFAULT_WAVEFORM = {
    "num_points": NUM_POINTS,
    "sample_rate": SAMPLE_RATE[FREQ_IDX],
    "write_width": 90,
    "read_width": 90,  #
    "enable_write_width": 30,
    "enable_read_width": 30,
    "enable_write_phase": 0,
    "enable_read_phase": 30,
    "bitmsg_channel": "N0RNR1RNRN",
    "bitmsg_enable": "NWNWEWNWEW",
}


# Fast waveform settings -- 11072024
# slow_write = {
#     "write_width": 40,
#     "enable_write_width": 40,
#     "enable_write_phase": 0,
# }
# fast_write = {
#     "write_width": 0,
#     "enable_write_width": 3,
#     "enable_write_phase": -5,
# }

# slow_read = {
#     "read_width": 40,
#     "enable_read_width": 120,
#     "enable_read_phase": 25,
# }

# fast_read = {
#     "read_width": 7,
#     "enable_read_width": 7,
#     "enable_read_phase": -8,
# }


DEFAULT_SCOPE = {
    "scope_horizontal_scale": HORIZONTAL_SCALE[FREQ_IDX],
    "scope_timespan": HORIZONTAL_SCALE[FREQ_IDX] * NUM_DIVISIONS,
    "scope_num_samples": NUM_SAMPLES,
    "scope_sample_rate": NUM_SAMPLES / (HORIZONTAL_SCALE[FREQ_IDX] * NUM_DIVISIONS),
}

DELAY_DICT = {
    0: {
        "delay": 1e-6,
        "bit_error_rate": 3.5e-4,
    },
    1: {
        "delay": 2e-6,
        "bit_error_rate": 2.5e-4,
    },
    2: {
        "delay": 3e-6,
        "bit_error_rate": 3.0e-4,
    },
    3: {
        "delay": 4e-6,
        "bit_error_rate_0": 4.91e-1,
        "bit_error_rate_1": 5.34e-1,
    },
    4: {
        "delay": 5e-6,
        "bit_error_rate_0": 5.13e-1,
        "bit_error_rate_1": 5.39e-1,
    },
    5: {
        "delay": 6e-6,
        "bit_error_rate_0": 5.10e-1,
        "bit_error_rate_1": 5.41e-1,
    },
}
